<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>جدول زمني: تاريخ المجمع الكيميائي التونسي</title>
  <!-- Optimized font loading with fewer weights -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&family=Noto+Sans+Arabic:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* WordPress Integration - Namespaced CSS with reset */
    .wp-timeline-container {
      all: initial;
      box-sizing: border-box;
      font-family: 'Tajawal', 'Noto Sans Arabic', 'Inter', sans-serif;
    }
    .wp-timeline-container *,
    .wp-timeline-container *::before,
    .wp-timeline-container *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    .wp-timeline-container {
      background: #f5f8fa;
      overflow-x: hidden;
    }
    
    /* FIXED: Adjusted container height to show footer properly */
    .wp-timeline-container .timeline-article-block {
      color: #1a1a1a;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(35,113,132,0.08);
      overflow: visible; /* Changed from hidden to visible */
      margin: 20px auto;
      width: 100%;
      max-width: 100%;
      max-height: 650px; /* Increased from 600px to accommodate footer */
      position: relative;
      display: flex;
      flex-direction: column;
    }
    
    /* ENHANCED: Dashboard-style header */
    .wp-timeline-container .timeline-header {
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 30px 20px;
      margin-bottom: 10px;
      text-align: center;
      position: relative;
      z-index: 10;
      overflow: hidden;
      flex-shrink: 0; /* Prevent header from shrinking */
    }

    .wp-timeline-container .timeline-header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255,255,255,0.05) 10px,
        rgba(255,255,255,0.05) 20px
      );
      animation: movePattern 20s linear infinite;
    }

    @keyframes movePattern {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .wp-timeline-container .timeline-header h2 {
      font-family: 'Tajawal', sans-serif;
      font-size: clamp(1.4rem, 3vw, 1.8rem);
      font-weight: 700;
      color: white;
      margin-bottom: 8px;
      line-height: 1.3;
      position: relative;
      z-index: 2;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .wp-timeline-container .timeline-header .subtitle {
      font-family: 'Noto Sans Arabic', sans-serif;
      font-size: clamp(0.9rem, 2vw, 1rem);
      color: white;
      font-weight: 400;
      line-height: 1.4;
      position: relative;
      z-index: 2;
      opacity: 0.9;
    }

    /* FIXED: Adjusted timeline flow to leave room for footer */
    .wp-timeline-container .timeline-flow {
      position: relative;
      overflow-x: auto;
      overflow-y: hidden;
      background: #fff;
      padding: 90px 0 30px 0;
      scroll-behavior: smooth;
      cursor: grab;
      max-height: 450px; /* Reduced from 520px to leave room for footer */
      flex: 1; /* Allow it to grow */
    }
    .wp-timeline-container .timeline-flow:active {
      cursor: grabbing;
    }
    
    /* Compact timeline list */
    .wp-timeline-container .timeline-list {
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      gap: 30px;
      min-height: 200px;
      position: relative;
      padding: 3px 60px;
    }
    
    /* Simplified connecting line */
    .wp-timeline-container .timeline-list::before {
      content: "";
      position: absolute;
      height: 4px;
      right: 30px;
      left: 30px;
      bottom: 54px;
      background: linear-gradient(90deg, #237184 0%, #4a9dc2 50%, #237184 100%);
      border-radius: 2px;
      z-index: 1;
      pointer-events: none;
      box-shadow: 0 1px 4px rgba(35, 113, 132, 0.1);
    }
    
    /* Smaller milestone cards */
    .wp-timeline-container .milestone {
      position: relative;
      min-width: 220px;
      max-width: 220px;
      min-height: 160px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(35,113,132,0.04);
      border-radius: 12px;
      border: 1.5px solid #bedcf1;
      padding: 20px 14px 16px 12px;
      z-index: 4;
      transition: transform 0.1s ease;
      cursor: pointer;
      margin-bottom: 30px;
      text-align: right;
      display: flex;
      flex-direction: column;
    }
    .wp-timeline-container .milestone:hover {
      border-color: #237184;
      background: #fafdff;
      transform: translateY(-1px);
    }
    
    /* FIXED: Adjusted circle positioning and z-index */
    .wp-timeline-container .year-dot {
      position: absolute;
      top: -75px; /* Adjusted from -60px to -75px for better spacing */
      right: 50%;
      transform: translateX(50%);
      width: clamp(28px, 6vw, 42px);
      height: clamp(28px, 6vw, 42px);
      background: linear-gradient(135deg, #237184 80%, #489fc2 100%);
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.8em, 2vw, 1em);
      font-weight: 600;
      border-radius: 50%;
      box-shadow: 0 0 0 3px #fff, 0 0 0 8px #eafbff22;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5; /* Reduced from 10 to 5 - still above timeline but below header */
      border: 2px solid #eaf5fa;
    }
    
    /* Compact content elements */
    .wp-timeline-container .milestone-type {
      display: inline-block;
      padding: 4px 12px;
      margin-bottom: 8px;
      margin-top: 4px;
      border-radius: 6px;
      font-size: clamp(0.85em, 1.8vw, 0.9em);
      font-weight: 600;
      background: #eaf5fa;
      color: #237184;
      font-family: 'Tajawal', sans-serif;
    }
    .wp-timeline-container .milestone-type.تأسيس { 
      background: #e9f9e2; 
      color: #219522; 
    }
    
    .wp-timeline-container .milestone-title {
      font-size: clamp(1em, 2vw, 1.1em);
      font-family: 'Tajawal', sans-serif;
      font-weight: 700;
      color: #1a324f;
      margin-bottom: 8px;
      margin-top: 4px;
      line-height: 1.4;
      flex-grow: 1;
    }
    
    /* Truncated descriptions with line-clamp */
    .wp-timeline-container .milestone-description {
      margin-top: 4px;
      margin-bottom: 12px;
      font-size: clamp(0.9em, 1.8vw, 0.95em);
      line-height: 1.5;
      color: #2d3949;
      font-family: 'Noto Sans Arabic', sans-serif;
      font-weight: 400;
      flex-grow: 1;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 3;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Compact tags */
    .wp-timeline-container .milestone-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: auto;
    }
    .wp-timeline-container .milestone-tag {
      background: #f5fafd;
      color: #2e85cf;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: clamp(0.8em, 1.6vw, 0.85em);
      border: 1px solid #dbeef6;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
    }
    
    /* ENHANCED: Dashboard-style footer - FIXED and visible */
    .wp-timeline-container .timeline-footer {
      background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
      padding: 25px 20px;
      color: #2c3e50;
      font-size: clamp(0.9rem, 1.8vw, 1rem);
      text-align: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-weight: 500;
      flex-shrink: 0; /* Prevent footer from shrinking */
      position: relative;
      z-index: 10; /* Ensure footer is visible */
      border-top: none;
      margin-top: auto; /* Push to bottom */
    }
    
    /* FIXED: Mobile optimizations with proper spacing */
    @media (max-width: 768px) {
      .wp-timeline-container .timeline-article-block {
        margin: 16px auto;
        border-radius: 12px;
        max-height: 750px; /* Increased for mobile */
      }
      
      .wp-timeline-container .timeline-header {
        padding: 25px 16px;
      }
      
      .wp-timeline-container .timeline-flow {
        padding: 40px 16px; /* Reduced padding since mobile circles are smaller */
        overflow-x: hidden;
        overflow-y: auto;
        cursor: default;
        max-height: 500px; /* Adjusted for mobile footer visibility */
      }
      
      .wp-timeline-container .timeline-list { 
        flex-direction: column; 
        gap: 0; 
        align-items: stretch; 
        padding: 0;
        min-height: auto;
      }
      
      /* Vertical connecting line for mobile */
      .wp-timeline-container .timeline-list::before {
        right: 35px; 
        left: auto;
        width: 4px;
        height: calc(100% - 30px);
        top: 0; 
        bottom: auto; 
        background: linear-gradient(180deg, #237184 0%, #4a9dc2 50%, #237184 100%);
      }
      
      .wp-timeline-container .milestone {
        min-width: 0;
        max-width: calc(100% - 70px);
        min-height: auto;
        margin-bottom: 25px;
        margin-right: 60px;
        margin-left: 0;
        padding: 16px 12px;
        position: relative;
      }
      
      .wp-timeline-container .milestone:last-child {
        margin-bottom: 15px;
      }
      
      /* FIXED: Mobile year dots with consistent z-index */
      .wp-timeline-container .year-dot {
        position: absolute;
        top: 12px;
        left: auto;
        right: -7vw;
        transform: none;
        width: clamp(24px, 8vw, 36px);
        height: clamp(24px, 8vw, 36px);
        font-size: clamp(0.7em, 2.2vw, 0.9em);
        z-index: 5; /* Consistent z-index */
      }
      
      /* Mobile description truncation - 2 lines */
      .wp-timeline-container .milestone-description {
        -webkit-line-clamp: 2;
        font-size: clamp(0.85em, 1.9vw, 0.9em);
      }
      
      .wp-timeline-container .timeline-footer {
        padding: 20px 16px;
      }
    }
    
    /* FIXED: Extra small screens with proper spacing */
    @media (max-width: 480px) {
      .wp-timeline-container .timeline-header {
        padding: 20px 12px;
      }
      
      .wp-timeline-container .timeline-flow {
        padding: 30px 12px; /* Further reduced for smaller circles */
        max-height: 400px; /* Adjusted accordingly */
      }
      
      .wp-timeline-container .milestone {
        margin-right: 50px;
        max-width: calc(100% - 60px);
        padding: 14px 10px;
      }
      
      .wp-timeline-container .year-dot {
        width: clamp(20px, 9vw, 32px);
        height: clamp(20px, 9vw, 32px);
        font-size: clamp(0.65em, 2.4vw, 0.8em);
        right: -6vw;
      }
      
      .wp-timeline-container .timeline-footer {
        padding: 18px 12px;
      }
    }

    /* Touch scrolling optimization */
    @media (max-width: 768px) {
      .wp-timeline-container .timeline-flow {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
      }
    }
    
    /* Simplified desktop scrollbar */
    @media (min-width: 769px) {
      .wp-timeline-container .timeline-flow::-webkit-scrollbar {
        height: 6px;
      }
      
      .wp-timeline-container .timeline-flow::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
      }
      
      .wp-timeline-container .timeline-flow::-webkit-scrollbar-thumb {
        background: #b4d6e0;
        border-radius: 3px;
        transition: background 0.2s;
      }
      
      .wp-timeline-container .timeline-flow::-webkit-scrollbar-thumb:hover {
        background: #237184;
      }
    }
  </style>
</head>
<body>
  <div class="wp-timeline-container">
    <div class="timeline-article-block">
      <div class="timeline-header">
        <h2>تاريخ بناء المجمع الكيميائي التونسي</h2>
        <span class="subtitle">خط زمني لأبرز محطات تأسيس وتوسع المجمع الكيميائي التونسي</span>
      </div>
      <div class="timeline-flow" id="scrollArea">
        <div class="timeline-list" id="timeline"></div>
      </div>
      <div class="timeline-footer">
        <strong>المصدر: وزارة الصناعة والمناجم والطاقة</strong>
      </div>
    </div>
  </div>
  <script>
    const events = [
      {
        id: 1,
        date: "1952",
        year: 1952,
        title: "بعث أول مؤسسة لصناعة المواد الكيميائية (سياب)",
        description: "أول مؤسسة متخصصة في صناعة المواد الكيميائية في صفاقس لإنتاج ثلاثي الفسفاط الرفيع.",
        type: "تأسيس",
        tags: ["صفاقس", "سياب", "ثلاثي الفسفاط"]
      },
      {
        id: 2,
        date: "1972",
        year: 1972,
        title: "بعث مصنع لإنتاج الحامض الفسفوري بقابس (ICM)",
        description: "إنشاء مصنع الحامض الفسفوري في قابس تحت اسم الصناعات الكيميائية المغاربية.",
        type: "تأسيس",
        tags: ["قابس", "ICM", "حامض فسفوري"]
      },
      {
        id: 3,
        date: "1979",
        year: 1979,
        title: "بعث مصنع الداب بقابس (SAEPA)",
        description: "إنشاء مصنع الداب تحت اسم الشركة العربية للأسمدة الفسفاطية والآزوتية في قابس.",
        type: "تأسيس",
        tags: ["قابس", "SAEPA", "الداب"]
      },
      {
        id: 4,
        date: "1983",
        year: 1983,
        title: "إنشاء مصنع الأمونيتر",
        description: "تأسيس مصنع متخصص في إنتاج سماد الأمونيتر لمنظومة الإنتاج التونسية.",
        type: "تأسيس",
        tags: ["أمونيتر", "أسمدة"]
      },
      {
        id: 5,
        date: "1985",
        year: 1985,
        title: "إنشاء مصنع أسمدة قابس (EG) لإنتاج الداب",
        description: "إضافة مصنع جديد لإنتاج الداب في قابس تحت اسم أسمدة قابس.",
        type: "تأسيس",
        tags: ["قابس", "EG", "الداب"]
      },
      {
        id: 6,
        date: "1985",
        year: 1985,
        title: "إنشاء شركة الصناعات الكيميائية بقفصة (ICG)",
        description: "تأسيس شركة الصناعات الكيميائية في قفصة لتوسيع الصناعة الكيميائية التونسية.",
        type: "تأسيس",
        tags: ["قفصة", "ICG"]
      },
      {
        id: 7,
        date: "1988",
        year: 1988,
        title: "إنشاء مصنع الصخيرة لإنتاج الحامض الفسفوري",
        description: "بناء مصنع الصخيرة المتخصص في إنتاج الحامض الفسفوري كمكون أساسي للأسمدة.",
        type: "تأسيس",
        tags: ["الصخيرة", "حامض فسفوري"]
      }
    ];
    
    function renderTimeline() {
      const timeline = document.getElementById('timeline');
      timeline.innerHTML = '';
      events.forEach((event, idx) => {
        const item = document.createElement('div');
        item.className = 'milestone';
        
        const yearDot = document.createElement('div');
        yearDot.className = 'year-dot';
        yearDot.textContent = event.year;
        item.appendChild(yearDot);

        const type = document.createElement('span');
        type.className = `milestone-type ${event.type}`;
        type.textContent = event.type;
        item.appendChild(type);

        const title = document.createElement('div');
        title.className = 'milestone-title';
        title.textContent = event.title;
        item.appendChild(title);

        const desc = document.createElement('div');
        desc.className = 'milestone-description';
        desc.textContent = event.description;
        item.appendChild(desc);

        const tags = document.createElement('div');
        tags.className = 'milestone-tags';
        tags.innerHTML = event.tags.map(tag =>
          `<span class="milestone-tag">${tag}</span>`
        ).join('');
        item.appendChild(tags);

        timeline.appendChild(item);
      });
    }
    
    renderTimeline();

    // Simplified scrolling functionality
    let isDown = false, startX, scrollLeft;
    
    function handleDesktopScrolling() {
      if (window.innerWidth > 768) {
        const scrollArea = document.getElementById('scrollArea');
        
        scrollArea.addEventListener('mousedown', (e) => {
          isDown = true;
          startX = e.pageX - scrollArea.offsetLeft;
          scrollLeft = scrollArea.scrollLeft;
          e.preventDefault();
        });
        
        scrollArea.addEventListener('mouseleave', () => {
          isDown = false;
        });
        
        scrollArea.addEventListener('mouseup', () => {
          isDown = false;
        });
        
        scrollArea.addEventListener('mousemove', (e) => {
          if (!isDown) return;
          e.preventDefault();
          const x = e.pageX - scrollArea.offsetLeft;
          const walk = (x - startX) * 1.5;
          scrollArea.scrollLeft = scrollLeft - walk;
        });
      }
    }

    function handleMobileScrolling() {
      if (window.innerWidth <= 768) {
        const scrollArea = document.getElementById('scrollArea');
        let startY, scrollTop;
        
        scrollArea.addEventListener('touchstart', (e) => {
          startY = e.touches[0].pageY;
          scrollTop = scrollArea.scrollTop;
        }, { passive: true });
        
        scrollArea.addEventListener('touchmove', (e) => {
          if (!startY) return;
          const y = e.touches[0].pageY;
          const walk = startY - y;
          scrollArea.scrollTop = scrollTop + walk;
        }, { passive: true });
        
        scrollArea.addEventListener('touchend', () => {
          startY = null;
        });
      }
    }

    function initializeScrolling() {
      handleDesktopScrolling();
      handleMobileScrolling();
    }

    window.addEventListener('resize', initializeScrolling);
    initializeScrolling();
  </script>
</body>
</html>
